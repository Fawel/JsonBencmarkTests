# JsonBencmarkTests
Пытаемся найти быстрейший сериализатор/десериализатор JSON на айтишном западе

Цель - найти самый шустрый десериализатор для Json больших размеров. Цель номер два - найти самый шустрый сериализатор большого кол-ва объектов в Json файл.

В рамках бенчмарка будут тестироваться:
* Newtonsoft.Json
* Jil
* utf8json

Json для тестов десериализации расположен в файле проекта. Для бенчмарка будет использоваться Benchmark.net

При большом кол-ве объектов JSON занимает довольно много места, так что хранить сами тестовые файлы не получится, оставил только файл на 1к записей. В проекте есть метод который генерит файл JSON с нужным кол-вом объектов, но там нужно менять путь.

В тестах считывается файл, путь для него нужно указать внутри класса-теста.

В тестах десериализации на x64 на большом кол-ве объектов из файла (50к объектов) Jil и Utf8Json показали очень похожее время, но второй жрал больше памяти, так что можно сказать, что победа за Jil в этом раунде.

Результат 1к объектов (FromString методы - сначала JSON был прочита в строку и потом уже десериализована)

|                        Method |      Mean |    Error |   StdDev |     Gen 0 |     Gen 1 |     Gen 2 | Allocated |
|------------------------------ |----------:|---------:|---------:|----------:|----------:|----------:|----------:|
|            Use_NewtonsoftJson | 125.75 ms | 0.856 ms | 0.801 ms | 2000.0000 | 1000.0000 |         - |  13.38 MB |
|                       Use_Jil |  62.67 ms | 0.422 ms | 0.395 ms | 2000.0000 | 1000.0000 |         - |  13.33 MB |
|                  Use_Utf8Json |  67.35 ms | 0.305 ms | 0.285 ms | 2625.0000 | 1250.0000 |  750.0000 |  27.92 MB |
| Use_NewtonsoftJson_FromString | 143.14 ms | 2.801 ms | 4.277 ms | 5000.0000 | 2000.0000 | 1000.0000 |  34.13 MB |
|            Use_Jil_FromString |  77.78 ms | 1.008 ms | 0.943 ms | 5000.0000 | 2000.0000 | 1000.0000 |  34.08 MB |
|       Use_Utf8Json_FromString |  92.30 ms | 1.840 ms | 2.191 ms | 5000.0000 | 2166.6667 |  833.3333 |  39.31 MB |

Машина и подробности запуска:
``` ini

BenchmarkDotNet=v0.12.1, OS=Windows 10.0.18362.900 (1903/May2019Update/19H1)
Intel Core i5-3570 CPU 3.40GHz (Ivy Bridge), 1 CPU, 4 logical and 4 physical cores
.NET Core SDK=3.1.300
  [Host]     : .NET Core 3.1.4 (CoreCLR 4.700.20.20201, CoreFX 4.700.20.22101), X64 RyuJIT
  DefaultJob : .NET Core 3.1.4 (CoreCLR 4.700.20.20201, CoreFX 4.700.20.22101), X64 RyuJIT


```
Результат для 100к объектов
|                        Method |     Mean |    Error |   StdDev |       Gen 0 |       Gen 1 |     Gen 2 | Allocated |
|------------------------------ |---------:|---------:|---------:|------------:|------------:|----------:|----------:|
|            Use_NewtonsoftJson | 14.136 s | 0.0526 s | 0.0466 s | 224000.0000 |  79000.0000 | 1000.0000 |   1.31 GB |
|                       Use_Jil |  7.869 s | 0.0253 s | 0.0237 s | 223000.0000 |  79000.0000 | 1000.0000 |    1.3 GB |
|                  Use_Utf8Json |  7.705 s | 0.0195 s | 0.0173 s | 203000.0000 |  74000.0000 | 3000.0000 |   3.17 GB |
| Use_NewtonsoftJson_FromString | 14.804 s | 0.0243 s | 0.0227 s | 397000.0000 | 140000.0000 | 1000.0000 |   3.33 GB |
|            Use_Jil_FromString |  7.908 s | 0.0109 s | 0.0102 s | 396000.0000 | 140000.0000 | 1000.0000 |   3.32 GB |
|       Use_Utf8Json_FromString |  9.087 s | 0.0139 s | 0.0123 s | 374000.0000 | 131000.0000 | 1000.0000 |   3.83 GB |

Машина и подробности запуска:
``` ini

BenchmarkDotNet=v0.12.1, OS=Windows 10.0.18362.900 (1903/May2019Update/19H1)
Intel Core i5-3570 CPU 3.40GHz (Ivy Bridge), 1 CPU, 4 logical and 4 physical cores
.NET Core SDK=3.1.300
  [Host]     : .NET Core 3.1.4 (CoreCLR 4.700.20.20201, CoreFX 4.700.20.22101), X64 RyuJIT
  DefaultJob : .NET Core 3.1.4 (CoreCLR 4.700.20.20201, CoreFX 4.700.20.22101), X64 RyuJIT
```
